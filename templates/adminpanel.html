<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel - MyApp</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body style="font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color:#f8f9fa;">

<!-- Header -->
<header style="background-color:#0d6efd; color:white; box-shadow:0 2px 10px rgba(0,0,0,0.1);" class="py-3 px-4">
    <div class="container-fluid d-flex justify-content-between align-items-center">
        <div>
            <h1 class="mb-1 fw-bold">Admin Panel</h1>
            <p class="mb-0 opacity-75">Secure User Management Dashboard</p>
        </div>
        <a href="{% url 'adminlogout' %}" class="btn" style="background-color:#000; color:#fff; font-weight:bold; padding:8px 16px; border-radius:0;">Log Out</a>
    </div>
</header>

<div class="container-fluid mt-4 px-4">

    <!-- Current Admin Box -->
    <div class="row mb-5">
        <div class="col-lg-3">
            <div style="background:white; border-radius:0; box-shadow:0 2px 5px rgba(0,0,0,0.05); padding:15px;">
                <h5 class="fw-bold mb-3">Current Admin</h5>
                <p><strong>ID:</strong> {{ request.user.id }}</p>
                <p><strong>Username:</strong> {{ request.user.username }}</p>
                <p><strong>Email:</strong> {{ request.user.email }}</p>
                <p><strong>Is Staff:</strong> {{ request.user.is_staff|yesno:"Yes,No" }}</p>
            </div>
        </div>
        <div class="col-lg-9"></div>
    </div>

    <!-- Search + Create User -->
    <div class="row mb-4">
        <div class="col-12">
            <h2 class="fw-bold mb-3">Users List</h2>
            <div class="d-flex justify-content-between align-items-center flex-wrap gap-2" style="background:#f8f9fa; padding:15px; border-radius:0;">
                <form method="get" class="d-flex flex-grow-1 gap-2" style="min-width:350px;">
                    <input type="text" name="search" value="{{ search_query }}" class="form-control" placeholder="Search users by name or email" style="border-radius:0;">
                    <button type="submit" class="btn btn-outline-primary" style="border-radius:0;">Search</button>
                </form>
                <a href="{% url 'create_user' %}" class="btn" style="background-color:#198754; color:white; font-weight:bold; padding:8px 16px; border-radius:0;">Create User</a>
            </div>
        </div>
    </div>

    <!-- Users Table -->
    <div class="row">
        <div class="col-12">
            <div style="background:white; border-radius:0; overflow:hidden; box-shadow:0 2px 5px rgba(0,0,0,0.05);">
                <table class="table table-striped mb-0">
                    <thead>
                        <tr>
                            <th style="background-color:#e9ecef; font-weight:600;">ID</th>
                            <th style="background-color:#e9ecef; font-weight:600;">Username</th>
                            <th style="background-color:#e9ecef; font-weight:600;">Email</th>
                            <th style="background-color:#e9ecef; font-weight:600;">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for user in users %}
                            {% if not user.is_superuser %}
                            <tr>
                                <td style="vertical-align:middle; border-top:1px solid #dee2e6;">{{ user.id }}</td>
                                <td style="vertical-align:middle; border-top:1px solid #dee2e6;">{{ user.username }}</td>
                                <td style="vertical-align:middle; border-top:1px solid #dee2e6;">{{ user.email }}</td>
                                <td style="vertical-align:middle; border-top:1px solid #dee2e6;">
                                    <a href="{% url 'edit_user' user.id %}" class="btn btn-sm btn-primary" style="margin-right:5px;">Edit</a>
                                    <a href="{% url 'delete_user' user.id %}" class="btn btn-sm btn-danger" style="margin-right:5px;">Delete</a>
                                    <a href="{% url 'block_unblock_user' user.id %}" class="btn btn-sm btn-warning" style="color:white;">Block</a>
                                </td>
                            </tr>
                            {% endif %}
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>

</div>

</body>
</html>
